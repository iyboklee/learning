- [1장. 신뢰할 수 있고 확장 가능하며 유지보수하기 쉬운 애플리케이션](#1장-신뢰할-수-있고-확장-가능하며-유지보수하기-쉬운-애플리케이션)
    - [신뢰성](#신뢰성)
    - [확장성](#확장성)
    - [유지보수성](#유지보수성)
- [2장. 데이터 모델과 질의 언어](#2장-데이터-모델과-질의-언어)
    - [관계형 모델](#관계형-모델)
    - [문서 모델](#문서-모델)
    - [그래프 모델](#그래프-모델)
- [3장. 저장소와 검색](#3장-저장소와-검색])

---

### 1장. 신뢰할 수 있고 확장 가능하며 유지보수하기 쉬운 애플리케이션

오늘날 많은 애플리케이션은 데이터 중심(data-intensive)적이다.

- CPU 성능은 더이상 애플리케이션을 제한하는 요소가 아님
- 데이터의 양, 데이터의 복잡도, 데이터 변화 속도가 훨씬 중요함

단일 도구로만 데이터 저장과 처리 모두를 만족시키기 어려우며 다양한 도구를 조합하여 사용해야 한다. 따라서 개발자는 애플리케이션 개발 뿐 아니라 다양한 데이터 시스템 도구를 잘 이해하고 사용해야한다. 대부분의
소프트웨어 시스템에서 중요하게 여기는 세가지 관심사는 다음과 같다.

- 신뢰성
    - 하드웨어나 소프트웨어 결함. 심지어 인적 오류(human error) 같은 역경에 직면하더라도 시스템은 지속적으로 올바르게 동작해야함
- 확장성
    - 시스템의 데이터 양, 트래픽 양, 복잡도가 증가하면서 이를 처리할 수 있는 적절한 방법이 있어야함
- 유지보수성
    - 시간이 지남에 따라 여러 다양한 사람들이 시스템 상에서 작업할 것이기 때문에 모든 사용자가 시스템 상에서 생산적으로 작업할 수 있게 해야함

#### 신뢰성

결함(fault)이 발생해도 시스템은 올바르게 동작해야 한다.

- 결함(fault)
    - 잘못될 수 있는 그 무언가 (사영을 벗어난 시스템의 한 구성 요소) 이며, 결함 확률을 0으로 만들수는 없음
    - 결함을 예측하고 대처할 수 있는 시스템을 내결함성(fault-tolerant) 또는 탄력성(resilient) 을 지녔다고 함
    - 사용자에서 필요한 서비스를 제공하지 못하고 시스템 전체가 멈추는 것을 의미하는 장애(failure)와는 다름
    - 카오스 몽키 프레임워크 (무작위로 시스템의 개별 프로세스 종료시키는 등 고의적으로 결함을 발생시켜 시스템을 테스트) 활용 가능
    - 하드웨어 결함
        - 하드웨어 구성 요소에 중복을 추가하는 방법으로 극복 (예: RAID 디스크, 이중 전원 등)
    - 소프트웨어 결함
        - 예상하기 어렵고, 신속한 해결이 어려움
        - 시스템의 가정과 상호작용에 대해 주의깊게 생각, 충분한 테스트, 프로세스 격리, 모니터링, 로그 분석 등이 필요함
    - 설정 오류 등 인적 오류에 의한 결함 발생 가능성을 고려해야 함

#### 확장성

부하가 증가해도 시스템은 좋은 성능을 유지해야 한다.

- 부하 기술하기
    - 부하 매개변수라 부르는 몇 개의 지표로 표현 가능하며 시스템 설계에 따라 달라짐
        - 트위터의 fan-out 설계는 사용자당 팔로워의 분포가 핵심 부하 매개변수임
    - 소수의 사용자에 의한 극단적인 경우가 큰 부하를 발생시키도 함
        - 트위터의 fan-out 설계는 팔로워가 수천만명이 되는 일부 사용자에게는 큰 도전 과제가 됨
- 성능 기술하기
    - 처리량(throughput)은 단위 시간당 처리할 수 있는 레코드의 갯수 (일괄 처리 시스템에서 중요함)
    - 응답 시간(response time)은 클라이언트가 요청을 보내고 응답을 받을 때까지의 시간 (온라인 시스템에서 중요함)
        - 동일한 요청도 매번 응답 시간이 다를 수 있으므로, 응답 시간은 분포로 생각 해야함
        - 산술 평균(mean)은 별로 의미가 없고, 백분위(percentile)를 사용하는 것이 좋음
            - p999(99.9%) 같은 상위 백분위가 특히 중요함. 이들 사용자는 가장 많은 데이터를 가지고 있는 중요 고객
            - 그러나 모든 사용자에 대한 최적화는 현실적으로 불가능하므로 어느정도 타협이 필요함 (아마존에서는 99.99분위에 대한 최적화는 하지 않음)
- 부하에 대한 접근 방식
    - 좀 더 좋은 장비를 사용하는 scale-up 방식
        - 돈으로 해결할 수 있는 가장 쉬운 접근법
        - 그러나 scale-up 에는 물리적 한계가 있고, 시스템 성능 증가도 선형적이지 않음
    - 가성비가 좋은 다수의 장비를 사용하는 scale-out 방식
        - 상태가 있는 시스템을 다수의 장비에 분산하는 일은 많은 복잡도가 발생 함
        - 주요 동작이 무엇이고, 평소에 잘 하지 않는 동작이 무엇인가에 대한 정의가 필요함 (=부하 매개변수)
        - 위 가정이 잘못되면 시스템은 제대로 동작하지 않게 됨

#### 유지보수성

시스템에서 작업하는 엔지니어와 운영 팀의 삶을 개선한다.

- 운용성: 운영하기 쉬워야 함
    - 반복되는 작업을 자동화하고 운영팀이 고부가가치 활동에 집중할 수 있게 해야함
- 단순성: 시스템 복잡도를 최대한 제거해 이해하기 쉬워야함
    - 추상화를 통해 시스템의 복잡도를 숨김
    - 그러나 좋은 추상화를 위한 방법은 명확하지 않으며, 경험적으로 익혀야 함
- 발정성: 시스템을 쉽게 변경할 수 있게 해야함
    - 시스템 요구사항은 끊임없이 변화하기 때문

### 2장. 데이터 모델과 질의 언어

데이터 모델은 소프트웨어 개발에서 가장 중요한 부분이다.

- 소프트웨어가 어떻게 작성됐는지를 설명함
- 소프트웨어가 문제를 어떻게 생각해야 하는 하는지에 대해 영향일 끼침

아래 세 가지 데이터 모델이 가장 널리 쓰인다. 각 데이터 모델에서 어떤 연산은 빠르지만 또 어떤 연산은 매우 느리다. 따라서 각자 목적에 맞게 잘 사용해야 한다.

- 관계형 모델
- 문서 모델
- 그래프 모델

#### 관계형 모델

Row 집합인 테이블들의 관계로 구성된다. (a.k.a RDBMS)

- 모든 데이터는 정해진 스키마를 따름
- 온라인 트랜잭션 처리, 일괄처리 목적으로 가장 널리 사용됨
- 중복 데이터를 제거하고, 데이터의 효과적인 관리를 위해 정규화할 수 있음
- 일대다, 다대일 관계를 잘 표현함
- 최신 버전의 RDBMS에서는 데이터를 문서 모델처럼 다룰 수 있도록 기능을 지원하기도 함 (JSON 컬럼 타입 지원)
- 상속, 다형성 같은 객체지향에서 중요한 특징을 RDBMS 모델로 표현하기 어려움
    - 다양한 ORM 도구를 이용할 수 있으나 근본적인 문제의 해결은 아님

데이터 질의를 위해 SQL 이라는 선언형 질의어를 사용한다.

#### 문서 모델

데이터가 문서 자체에 포함되 있으며, 하나의 문서가 다른 문서와 관계를 거의 가지지 않을 경우 유리하다.

- 정해진 스키마가 없음
    - 변화하는 요구사항에 맞춰 쉽게 변경 가능
    - 데이터를 읽을 경우 암묵적인 스키마를 이용해 데이터를 해석해야 함
- 데이터가 모두 한 문서 내에 있기 때문에 성능이 좋음 (JOIN 불필요)
    - 데이터를 읽거나 쓸때 전체 문서를 처리해야 함으로 문서의 크기를 작게 유지해야 좋음
- JSON 포맷으로 표현하기 좋음
- 애플리케이션이 발전하며 데이터가 상호 연결되는 경향이 있기 때문에, 점진적으로 어려움을 겪을 수 있음
    - 보통 JOIN 질의 처리 지원이 약하기 때문에 애플리케이션에서 코드로 구현해야 함

MapReduce 등으로 데이터 질의를 표현할 수 있다. SQL을 MapRecude 연산으로 처리해주는 도구들도 있다.

#### 그래프 모델

다대다 관계가 매우 일반적인 데이터를 처리하는데 좋다. 정점(vertex)과 간선(edge)이라는 두 유형의 데이터로 표현된다.

- 정점은 다른 정점과 간선으로 연결됨
- 정점이 주어지면 정점으로 유입되거나 유출되는 간선을 효율적으로 찾을 수 있고 그래프 순회가 가능함
- 정해진 스키마가 없음 (문서 모델과 동일)
    - 변화하는 요구사항에 맞춰 쉽게 변경 가능
    - 데이터를 읽을 경우 암묵적인 스키마를 이용해 데이터를 해석해야 함

데이터 질의를 위해 사이퍼(Cypher) 이라는 선언형 질의어를 사용한다.

### 3장. 저장소와 검색

TBD